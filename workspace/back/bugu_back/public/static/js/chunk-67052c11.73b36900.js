(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67052c11"],{"0fa8":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("a-modal",{attrs:{title:"新建项目",closable:!0,maskClosable:!1},on:{cancel:e.handleCancel,ok:function(t){return e.handleOk("ruleForm")}},model:{value:e.$store.state.card.createVisible,callback:function(t){e.$set(e.$store.state.card,"createVisible",t)},expression:"$store.state.card.createVisible"}},[r("a-form-model",e._b({ref:"ruleForm",attrs:{model:e.initForm,rules:e.rules}},"a-form-model",e.layout,!1),[r("a-form-model-item",{attrs:{"has-feedback":"",label:"项目名称：",prop:"name"}},[r("a-input",{ref:"name",attrs:{autoFocus:!0,type:"text",allowClear:"",autocomplete:"off"},model:{value:e.initForm.name,callback:function(t){e.$set(e.initForm,"name",t)},expression:"initForm.name"}})],1),r("a-form-model-item",{attrs:{label:"项目英文名：",prop:"token"}},[r("a-input",{ref:"token",attrs:{type:"text",allowClear:"",autocomplete:"off"},model:{value:e.initForm.token,callback:function(t){e.$set(e.initForm,"token",t)},expression:"initForm.token"}})],1),r("a-form-model-item",{attrs:{label:"项目类型：",prop:"type"}},[r("a-radio-group",{ref:"type",attrs:{name:"type"},model:{value:e.initForm.type,callback:function(t){e.$set(e.initForm,"type",t)},expression:"initForm.type"}},[r("a-tooltip",{attrs:{placement:"top",title:"仅仅编辑一个组件,不能进行后续编译"}},[r("a-radio",{attrs:{value:"1"}},[e._v(" 组件 ")])],1),r("a-tooltip",{attrs:{placement:"top",title:"有多个组件,包含main核心组件,可进行后续编译"}},[r("a-radio",{attrs:{value:"0"}},[e._v(" 工程 ")])],1)],1)],1),"0"===e.initForm.type?[r("a-form-model-item",{attrs:{"has-feedback":"",label:"芯片类型：",prop:"chip"}},[r("a-select",{ref:"chip",attrs:{allowClear:"",autocomplete:"off"},model:{value:e.initForm.chip,callback:function(t){e.$set(e.initForm,"chip",t)},expression:"initForm.chip"}},e._l(e.chipList,(function(t){return r("a-select-option",{key:t.id,attrs:{value:t.name}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),r("a-form-model-item",{attrs:{"has-feedback":"",label:"堆大小：",prop:"heap"}},[r("a-input-number",{ref:"heap",attrs:{min:1,allowClear:"",type:"text",autocomplete:"off"},model:{value:e.initForm.heap,callback:function(t){e.$set(e.initForm,"heap",t)},expression:"initForm.heap"}})],1),r("a-form-model-item",{attrs:{"has-feedback":"",label:"栈大小：",prop:"stack"}},[r("a-input-number",{ref:"stack",attrs:{min:1,allowClear:"",type:"text",autocomplete:"off"},model:{value:e.initForm.stack,callback:function(t){e.$set(e.initForm,"stack",t)},expression:"initForm.stack"}})],1)]:[r("a-tooltip",{attrs:{placement:"bottom",title:"用户通过抽象组件来实现项目在不同平台间的快速移植,其中不用实现方法"}},[r("a-form-model-item",{attrs:{label:"抽象组件：",prop:"abstract"}},[r("a-radio-group",{ref:"abstract",attrs:{name:"abstract"},model:{value:e.initForm.abstract,callback:function(t){e.$set(e.initForm,"abstract",t)},expression:"initForm.abstract"}},[r("a-radio",{attrs:{value:"1"}},[e._v(" 是 ")]),r("a-radio",{attrs:{value:"2"}},[e._v(" 否 ")])],1)],1)],1)],r("a-form-model-item",{attrs:{"has-feedback":"",label:"简介：",prop:"description"}},[r("a-textarea",{attrs:{placeholder:"项目简单介绍",allowClear:"",rows:3},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleOk("ruleForm")}},model:{value:e.initForm.description,callback:function(t){e.$set(e.initForm,"description",t)},expression:"initForm.description"}})],1)],2)],1)],1)},i=[],o=(r("b0c0"),r("a4d3"),r("e01a"),r("d3b7"),r("25f0"),r("e1bd")),a=r("6826"),c=r("aa15"),s=r("cc33"),l=r("4114"),u={name:"Init",components:{},data:function(){return{loading:!1,chipList:[],initForm:{id:Object(o["a"])(),type:"0",name:"",token:"",heap:"",stack:"",chip:"",abstract:"0",description:""},rules:{type:[{required:!0,message:"请选择项目类型",trigger:"change"}],name:[{required:!0,message:"请输入项目名称",trigger:"change"}],stack:[{required:!0,message:"请输入栈大小",trigger:"change"}],heap:[{required:!0,message:"请输入堆大小",trigger:"change"}],chip:[{required:!0,message:"请选择芯片类型",trigger:"change"}],abstract:[{required:!0,message:"请选择是否为抽象组件",trigger:"change"}]},layout:{labelCol:{span:7},wrapperCol:{span:15}}}},computed:{},watch:{},methods:{getChipList:function(){var e=this;l["a"].queryAll().then((function(t){200===t.code?e.chipList=t.data:e.chipList=[]}))},findChipId:function(e){for(var t=0;t<this.chipList.length;t++)if(this.chipList[t].name===e)return this.chipList[t].id},nextFocus:function(e){this.$refs[e].focus()},handleOk:function(e){var t=this,r={};this.$refs[e].validate((function(e){if(!e)return t.$message.error("新建失败",.5),!1;"0"===t.initForm.type?(r.userId=Object(s["c"])().id,r.author=Object(s["c"])().nickName,r.name=t.initForm.name,r.token=t.initForm.token?t.initForm.token:"engineering",r.type="2",r.description=t.initForm.description,r.chipId=t.findChipId(t.initForm.chip),r.stack="0x"+parseInt(t.initForm.stack).toString(16),r.heap="0x"+parseInt(t.initForm.heap).toString(16),r.componentsId="",a["a"].init(r).then((function(e){200===e.code?(t.$message.success(e.msg,.5),t.$store.commit("SET_PROJECT",e.data),sessionStorage.setItem("projectId",e.data.id),Object(s["a"])()&&Object(s["d"])(),Object(s["h"])(e.data),t.$store.commit("SET_CREATEVISIBLE",!1),t.$router.push({name:"Project"})):(t.$message.error(e.msg,.5),console.log(e.msg),t.resetForm("ruleForm"))})).catch((function(){t.$message.error("新建失败",.5),t.resetForm("ruleForm")}))):(r.name=t.initForm.name,r.token=t.initForm.token?t.initForm.token:"component",r.userId=Object(s["c"])().id,r.author=Object(s["c"])().nickName,r.type=t.initForm.abstract,r.description=t.initForm.description,c["a"].add(r).then((function(e){console.log("组件",e.data),200===e.code?(t.$message.success(e.msg,.5),t.$store.commit("SET_PROJECT",e.data),t.$store.commit("SET_CREATEVISIBLE",!1),t.$router.push({name:"Project"})):(t.$message.error(e.msg,.5),t.resetForm("ruleForm"))})).catch((function(){t.$message.error("新建失败",.5),t.resetForm("ruleForm")})))}))},handleCancel:function(){this.$store.commit("SET_CREATEVISIBLE",!1),this.$router.push({path:"/usercenter/projectinfo"}),this.$message.info("取消新建",.5)},resetForm:function(e){this.$refs[e].resetFields()},beforeUnloadHandler:function(e){e.returnValue=""}},created:function(){this.getChipList()},mounted:function(){this.$bus.$on("clear",this.clearExpand)},destroyed:function(){}},m=u,p=r("2877"),d=Object(p["a"])(m,n,i,!1,null,"02fe3f26",null);t["default"]=d.exports},4114:function(e,t,r){"use strict";var n=r("b775"),i={add:function(e){return Object(n["d"])("/chip",e)},queryById:function(e){return Object(n["c"])("/chip/"+e)},queryAll:function(){return Object(n["c"])("/chip")},update:function(e){return Object(n["e"])("/chip",e)},del:function(e){return Object(n["a"])("/chip/"+e)}};t["a"]=i},6826:function(e,t,r){"use strict";var n=r("b775"),i={init:function(e){return Object(n["d"])("/engineering/init",e)},add:function(e){return Object(n["d"])("/engineering",e)},queryById:function(e){return Object(n["c"])("/engineering/"+e)},queryByUid:function(e){return Object(n["c"])("/engineering/user/"+e)},queryAll:function(){return Object(n["c"])("/engineering")},update:function(e){return Object(n["e"])("/engineering",e)},del:function(e){return Object(n["a"])("/engineering/"+e)}};t["a"]=i},aa15:function(e,t,r){"use strict";var n=r("b775"),i={add:function(e){return Object(n["d"])("/component",e)},queryById:function(e){return Object(n["c"])("/component/"+e)},queryAll:function(){return Object(n["c"])("/component")},update:function(e){return Object(n["e"])("/component",e)},del:function(e,t){return Object(n["a"])("/component/"+e+"/"+t)}};t["a"]=i},e01a:function(e,t,r){"use strict";var n=r("23e7"),i=r("83ab"),o=r("da84"),a=r("e330"),c=r("1a2d"),s=r("1626"),l=r("3a9b"),u=r("577e"),m=r("9bf2").f,p=r("e893"),d=o.Symbol,f=d&&d.prototype;if(i&&s(d)&&(!("description"in f)||void 0!==d().description)){var b={},h=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),t=l(f,this)?new d(e):void 0===e?d():d(e);return""===e&&(b[t]=!0),t};p(h,d),h.prototype=f,f.constructor=h;var g="Symbol(test)"==String(d("test")),F=a(f.toString),k=a(f.valueOf),y=/^Symbol\((.*)\)[^)]+$/,v=a("".replace),$=a("".slice);m(f,"description",{configurable:!0,get:function(){var e=k(this),t=F(e);if(c(b,e))return"";var r=g?$(t,7,-1):v(t,y,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:h})}},e1bd:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));let n=(e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e));while(e--){let n=63&r[e];t+=n<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n<63?"_":"-"}return t}}}]);