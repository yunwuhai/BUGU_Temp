(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58c353b4"],{"00b4":function(e,r,t){"use strict";t("ac1f");var n=t("23e7"),s=t("da84"),o=t("c65b"),a=t("e330"),i=t("1626"),c=t("861d"),u=function(){var e=!1,r=/[ac]/;return r.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===r.test("abc")&&e}(),l=s.Error,m=a(/./.test);n({target:"RegExp",proto:!0,forced:!u},{test:function(e){var r=this.exec;if(!i(r))return m(this,e);var t=o(r,this,e);if(null!==t&&!c(t))throw new l("RegExp exec method returned something other than an Object or null");return!!t}})},"06bf":function(e,r,t){},"21b6":function(e,r,t){"use strict";t("06bf")},"81e4":function(e,r,t){e.exports=t.p+"static/img/LOGO.75def794.png"},8710:function(e,r,t){},"8dc8":function(e,r,t){},"9ab8":function(e,r,t){"use strict";t("8dc8")},ab36:function(e,r,t){var n=t("861d"),s=t("9112");e.exports=function(e,r){n(r)&&"cause"in r&&s(e,"cause",r.cause)}},b980:function(e,r,t){var n=t("d039"),s=t("5c6c");e.exports=!n((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",s(1,7)),7!==e.stack)}))},c770:function(e,r,t){var n=t("e330"),s=n("".replace),o=function(e){return String(Error(e).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,i=a.test(o);e.exports=function(e,r){if(i&&"string"==typeof e)while(r--)e=s(e,a,"");return e}},d8e1:function(e,r,t){"use strict";t.r(r);var n=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("transition",{attrs:{mode:"out-in",appear:"","appear-active-class":"animate__animated animate__fadeIn"}},[n("div",{staticClass:"container"},[n("header",{staticClass:"header"},[n("div",{staticClass:"img-container"},[n("img",{attrs:{src:t("81e4"),alt:"logo",width:"210px",height:"85px"}})]),n("span",{staticClass:"header-title"},[e._v("不咕极简物联云开发平台")])]),n("div",{staticClass:"content"},[n("svg-icon",{attrs:{"icon-class":"login",className:"svg"}}),n("a-divider",{staticStyle:{height:"470px"},attrs:{type:"vertical"}}),n("div",{staticClass:"login-container"},[n("a-tabs",{staticStyle:{"text-align":"center"},model:{value:e.activeKey,callback:function(r){e.activeKey=r},expression:"activeKey"}},[n("a-tab-pane",{key:"1",attrs:{tab:"登录"}},[n("Login")],1),n("a-tab-pane",{key:"2",attrs:{tab:"注册"}},[n("Register")],1)],1)],1)],1)])])},s=[],o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"login"},[t("a-form-model",e._b({ref:"ruleForm",attrs:{rules:e.rules,model:e.loginForm}},"a-form-model",e.layout,!1),[t("a-form-model-item",{attrs:{label:"用户名",prop:"userName"}},[t("a-input",{attrs:{type:"text",autoFocus:!0,allowClear:"",autocomplete:"off"},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.nextFocus()}},model:{value:e.loginForm.userName,callback:function(r){e.$set(e.loginForm,"userName",r)},expression:"loginForm.userName"}})],1),t("a-form-model-item",{attrs:{label:"密码：",prop:"pass"}},[t("a-input",{ref:"pass",attrs:{type:"password",allowClear:"",autocomplete:"off"},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.submitForm("ruleForm")}},model:{value:e.loginForm.pass,callback:function(r){e.$set(e.loginForm,"pass",r)},expression:"loginForm.pass"}})],1),t("a-form-model-item",{attrs:{"wrapper-col":{span:14,offset:4}}},[t("a-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v(" 登录 ")])],1)],1)],1)},a=[],i=t("cc33"),c=t("b775"),u={login:function(e){return Object(c["d"])("/entrance/login",e)},register:function(e){return Object(c["d"])("/entrance/register",e)},logout:function(){return Object(c["d"])("/entrance/logout")}},l=u,m={data:function(){return{loading:!1,loginForm:{userName:"",nickName:"",pass:"",role:1},layout:{labelCol:{span:4},wrapperCol:{span:15}},rules:{userName:[{required:!0,message:"请输入用户名",trigger:"change"}],pass:[{required:!0,message:"请输入密码",trigger:"change"}]}}},methods:{regSuccess:function(e){this.loginForm.userName=e.userName,this.loginForm.pass=e.pass},nextFocus:function(){this.$refs.pass.focus()},submitForm:function(e){var r=this;this.loading=!0,this.$refs[e].validate((function(e){e?l.login({userName:r.loginForm.userName,pass:r.loginForm.pass}).then((function(e){200===e.code?(r.$message.success(e.msg,.5),i["g"](!0),i["i"](e.data.token),delete e.data.userInfo.pass,i["j"](e.data.userInfo),r.loading=!1,"1"===e.data.userInfo.role?r.$router.push({path:"/usercenter"}):"0"===e.data.userInfo.role&&r.$router.push({path:"/admin"})):(r.$message.error(e.msg,.7),i["g"](!1),r.loading=!1)})).catch((function(e){r.$message.error("登录失败",.5),console.log(e),r.loading=!1})):r.loading=!1}))},resetForm:function(e){this.$refs[e].resetFields()}},mounted:function(){this.$bus.$on("success",this.regSuccess)}},f=m,p=(t("fc6af"),t("2877")),d=Object(p["a"])(f,o,a,!1,null,"79f9a042",null),g=d.exports,h=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"register"},[t("a-form-model",e._b({ref:"ruleForm",attrs:{model:e.registerForm,rules:e.rules}},"a-form-model",e.layout,!1),[t("a-form-model-item",{attrs:{"has-feedback":"",label:"昵称",prop:"nickName"}},[t("a-input",{attrs:{type:"text",autoFocus:!0,reg:"userName",allowClear:"",autocomplete:"off"},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.nextFocus("userName")}},model:{value:e.registerForm.nickName,callback:function(r){e.$set(e.registerForm,"nickName",r)},expression:"registerForm.nickName"}})],1),t("a-form-model-item",{attrs:{"has-feedback":"",label:"用户名",prop:"userName"}},[t("a-input",{attrs:{type:"text",reg:"userName",placeholder:"用于登录的账号",allowClear:"",autocomplete:"off"},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.nextFocus("pass")}},model:{value:e.registerForm.userName,callback:function(r){e.$set(e.registerForm,"userName",r)},expression:"registerForm.userName"}})],1),t("a-form-model-item",{attrs:{"has-feedback":"",label:"密码：",prop:"pass"}},[t("a-input-password",{ref:"pass",attrs:{allowClear:"",type:"password",autocomplete:"off"},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.nextFocus("checkPass")}},model:{value:e.registerForm.pass,callback:function(r){e.$set(e.registerForm,"pass",r)},expression:"registerForm.pass"}})],1),t("a-form-model-item",{attrs:{"has-feedback":"",label:"重复密码：",prop:"checkPass"}},[t("a-input-password",{ref:"checkPass",attrs:{allowClear:"",type:"password",autocomplete:"off"},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.nextFocus("tel")}},model:{value:e.registerForm.checkPass,callback:function(r){e.$set(e.registerForm,"checkPass",r)},expression:"registerForm.checkPass"}})],1),t("a-form-model-item",{attrs:{"has-feedback":"",label:"手机号码：",prop:"tel"}},[t("a-input",{attrs:{allowClear:"",type:"text",autocomplete:"off"},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.submitForm("ruleForm")}},model:{value:e.registerForm.tel,callback:function(r){e.$set(e.registerForm,"tel",r)},expression:"registerForm.tel"}})],1),t("a-form-model-item",{attrs:{"wrapper-col":{span:14,offset:4}}},[t("a-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v(" 注册 ")]),t("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v(" 重置 ")])],1)],1)],1)},k=[],b=(t("d9e2"),t("ac1f"),t("00b4"),{data:function(){var e=this,r=function(e,r,t){""===r?t(new Error("请输入用户名")):r.length<6||r.length>12?t(new Error("请输入6-12位用户名")):t()},t=function(e,r,t){""===r?t(new Error("请输入密码")):r.length<6||r.length>12?t(new Error("请输入6-12位密码")):t()},n=function(r,t,n){""===t?n(new Error("请再次输入密码")):t!==e.registerForm.pass?n(new Error("两次密码不一致")):n()},s=function(e,r,t){var n=/^((1[3,5,8][0-9])|(14[5,7])|(17[0,5,6,7,8])|(19[7]))\d{8}$/;""===r?t(new Error("请输入电话号码")):r.length<11||!n.test(r)?t(new Error("电话号码错误")):t()};return{loading:!1,registerForm:{userName:"",nickName:"",pass:"",checkPass:"",tel:""},rules:{nickName:[{required:!0,message:"请输入昵称",trigger:"change"}],userName:[{required:!0,validator:r,trigger:"change"}],pass:[{required:!0,validator:t,trigger:"change"}],checkPass:[{required:!0,validator:n,trigger:"change"}],tel:[{required:!0,validator:s,trigger:"change"}]},layout:{labelCol:{span:6},wrapperCol:{span:15}}}},methods:{submitForm:function(e){var r=this;this.loading=!0,this.$refs[e].validate((function(t){if(t){var n={userName:r.registerForm.userName,nickName:r.registerForm.nickName,pass:r.registerForm.pass,tel:r.registerForm.tel,role:"1"};l.register(n).then((function(t){200===t.code?(console.log(t),r.$message.success(t.msg,.5),r.loading=!1,r.$bus.$emit("success",{userName:r.registerForm.userName,pass:r.registerForm.pass,activeKey:"1"}),r.$refs[e].resetFields()):r.$message.error("注册失败1",.5)})).catch((function(e){r.$message.error("注册失败2",.5),console.err(e),r.loading=!1}))}}))},resetForm:function(e){this.$refs[e].resetFields()},nextFocus:function(e){this.$refs[e].focus()}}}),y=b,v=(t("21b6"),Object(p["a"])(y,h,k,!1,null,"021cb605",null)),F=v.exports,x={name:"Entrance",components:{Login:g,Register:F},data:function(){return{activeKey:"1"}},methods:{regSuccess:function(e){this.activeKey=e.activeKey}},mounted:function(){this.$bus.$on("success",this.regSuccess)}},E=x,w=(t("9ab8"),Object(p["a"])(E,n,s,!1,null,null,null));r["default"]=w.exports},d9e2:function(e,r,t){var n=t("23e7"),s=t("da84"),o=t("2ba4"),a=t("e5cb"),i="WebAssembly",c=s[i],u=7!==Error("e",{cause:7}).cause,l=function(e,r){var t={};t[e]=a(e,r,u),n({global:!0,forced:u},t)},m=function(e,r){if(c&&c[e]){var t={};t[e]=a(i+"."+e,r,u),n({target:i,stat:!0,forced:u},t)}};l("Error",(function(e){return function(r){return o(e,this,arguments)}})),l("EvalError",(function(e){return function(r){return o(e,this,arguments)}})),l("RangeError",(function(e){return function(r){return o(e,this,arguments)}})),l("ReferenceError",(function(e){return function(r){return o(e,this,arguments)}})),l("SyntaxError",(function(e){return function(r){return o(e,this,arguments)}})),l("TypeError",(function(e){return function(r){return o(e,this,arguments)}})),l("URIError",(function(e){return function(r){return o(e,this,arguments)}})),m("CompileError",(function(e){return function(r){return o(e,this,arguments)}})),m("LinkError",(function(e){return function(r){return o(e,this,arguments)}})),m("RuntimeError",(function(e){return function(r){return o(e,this,arguments)}}))},e391:function(e,r,t){var n=t("577e");e.exports=function(e,r){return void 0===e?arguments.length<2?"":r:n(e)}},e5cb:function(e,r,t){"use strict";var n=t("d066"),s=t("1a2d"),o=t("9112"),a=t("3a9b"),i=t("d2bb"),c=t("e893"),u=t("7156"),l=t("e391"),m=t("ab36"),f=t("c770"),p=t("b980"),d=t("c430");e.exports=function(e,r,t,g){var h=g?2:1,k=e.split("."),b=k[k.length-1],y=n.apply(null,k);if(y){var v=y.prototype;if(!d&&s(v,"cause")&&delete v.cause,!t)return y;var F=n("Error"),x=r((function(e,r){var t=l(g?r:e,void 0),n=g?new y(e):new y;return void 0!==t&&o(n,"message",t),p&&o(n,"stack",f(n.stack,2)),this&&a(v,this)&&u(n,this,x),arguments.length>h&&m(n,arguments[h]),n}));if(x.prototype=v,"Error"!==b&&(i?i(x,F):c(x,F,{name:!0})),c(x,y),!d)try{v.name!==b&&o(v,"name",b),v.constructor=x}catch(E){}return x}}},fc6af:function(e,r,t){"use strict";t("8710")}}]);