(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08cd73fc","chunk-67052c11"],{"0fa8":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("a-modal",{attrs:{title:"新建项目",closable:!0,maskClosable:!1},on:{cancel:e.handleCancel,ok:function(t){return e.handleOk("ruleForm")}},model:{value:e.$store.state.card.createVisible,callback:function(t){e.$set(e.$store.state.card,"createVisible",t)},expression:"$store.state.card.createVisible"}},[a("a-form-model",e._b({ref:"ruleForm",attrs:{model:e.initForm,rules:e.rules}},"a-form-model",e.layout,!1),[a("a-form-model-item",{attrs:{"has-feedback":"",label:"项目名称：",prop:"name"}},[a("a-input",{ref:"name",attrs:{autoFocus:!0,type:"text",allowClear:"",autocomplete:"off"},model:{value:e.initForm.name,callback:function(t){e.$set(e.initForm,"name",t)},expression:"initForm.name"}})],1),a("a-form-model-item",{attrs:{label:"项目英文名：",prop:"token"}},[a("a-input",{ref:"token",attrs:{type:"text",allowClear:"",autocomplete:"off"},model:{value:e.initForm.token,callback:function(t){e.$set(e.initForm,"token",t)},expression:"initForm.token"}})],1),a("a-form-model-item",{attrs:{label:"项目类型：",prop:"type"}},[a("a-radio-group",{ref:"type",attrs:{name:"type"},model:{value:e.initForm.type,callback:function(t){e.$set(e.initForm,"type",t)},expression:"initForm.type"}},[a("a-tooltip",{attrs:{placement:"top",title:"仅仅编辑一个组件,不能进行后续编译"}},[a("a-radio",{attrs:{value:"1"}},[e._v(" 组件 ")])],1),a("a-tooltip",{attrs:{placement:"top",title:"有多个组件,包含main核心组件,可进行后续编译"}},[a("a-radio",{attrs:{value:"0"}},[e._v(" 工程 ")])],1)],1)],1),"0"===e.initForm.type?[a("a-form-model-item",{attrs:{"has-feedback":"",label:"芯片类型：",prop:"chip"}},[a("a-select",{ref:"chip",attrs:{allowClear:"",autocomplete:"off"},model:{value:e.initForm.chip,callback:function(t){e.$set(e.initForm,"chip",t)},expression:"initForm.chip"}},e._l(e.chipList,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.name}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"堆大小：",prop:"heap"}},[a("a-input-number",{ref:"heap",attrs:{min:1,allowClear:"",type:"text",autocomplete:"off"},model:{value:e.initForm.heap,callback:function(t){e.$set(e.initForm,"heap",t)},expression:"initForm.heap"}})],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"栈大小：",prop:"stack"}},[a("a-input-number",{ref:"stack",attrs:{min:1,allowClear:"",type:"text",autocomplete:"off"},model:{value:e.initForm.stack,callback:function(t){e.$set(e.initForm,"stack",t)},expression:"initForm.stack"}})],1)]:[a("a-tooltip",{attrs:{placement:"bottom",title:"用户通过抽象组件来实现项目在不同平台间的快速移植,其中不用实现方法"}},[a("a-form-model-item",{attrs:{label:"抽象组件：",prop:"abstract"}},[a("a-radio-group",{ref:"abstract",attrs:{name:"abstract"},model:{value:e.initForm.abstract,callback:function(t){e.$set(e.initForm,"abstract",t)},expression:"initForm.abstract"}},[a("a-radio",{attrs:{value:"1"}},[e._v(" 是 ")]),a("a-radio",{attrs:{value:"2"}},[e._v(" 否 ")])],1)],1)],1)],a("a-form-model-item",{attrs:{"has-feedback":"",label:"简介：",prop:"description"}},[a("a-textarea",{attrs:{placeholder:"项目简单介绍",allowClear:"",rows:3},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleOk("ruleForm")}},model:{value:e.initForm.description,callback:function(t){e.$set(e.initForm,"description",t)},expression:"initForm.description"}})],1)],2)],1)],1)},n=[],r=(a("b0c0"),a("a4d3"),a("e01a"),a("d3b7"),a("25f0"),a("e1bd")),o=a("6826"),s=a("aa15"),c=a("cc33"),_=a("4114"),l={name:"Init",components:{},data:function(){return{loading:!1,chipList:[],initForm:{id:Object(r["a"])(),type:"0",name:"",token:"",heap:"",stack:"",chip:"",abstract:"0",description:""},rules:{type:[{required:!0,message:"请选择项目类型",trigger:"change"}],name:[{required:!0,message:"请输入项目名称",trigger:"change"}],stack:[{required:!0,message:"请输入栈大小",trigger:"change"}],heap:[{required:!0,message:"请输入堆大小",trigger:"change"}],chip:[{required:!0,message:"请选择芯片类型",trigger:"change"}],abstract:[{required:!0,message:"请选择是否为抽象组件",trigger:"change"}]},layout:{labelCol:{span:7},wrapperCol:{span:15}}}},computed:{},watch:{},methods:{getChipList:function(){var e=this;_["a"].queryAll().then((function(t){200===t.code?e.chipList=t.data:e.chipList=[]}))},findChipId:function(e){for(var t=0;t<this.chipList.length;t++)if(this.chipList[t].name===e)return this.chipList[t].id},nextFocus:function(e){this.$refs[e].focus()},handleOk:function(e){var t=this,a={};this.$refs[e].validate((function(e){if(!e)return t.$message.error("新建失败",.5),!1;"0"===t.initForm.type?(a.userId=Object(c["c"])().id,a.author=Object(c["c"])().nickName,a.name=t.initForm.name,a.token=t.initForm.token?t.initForm.token:"engineering",a.type="2",a.description=t.initForm.description,a.chipId=t.findChipId(t.initForm.chip),a.stack="0x"+parseInt(t.initForm.stack).toString(16),a.heap="0x"+parseInt(t.initForm.heap).toString(16),a.componentsId="",o["a"].init(a).then((function(e){200===e.code?(t.$message.success(e.msg,.5),t.$store.commit("SET_PROJECT",e.data),sessionStorage.setItem("projectId",e.data.id),Object(c["a"])()&&Object(c["d"])(),Object(c["h"])(e.data),t.$store.commit("SET_CREATEVISIBLE",!1),t.$router.push({name:"Project"})):(t.$message.error(e.msg,.5),console.log(e.msg),t.resetForm("ruleForm"))})).catch((function(){t.$message.error("新建失败",.5),t.resetForm("ruleForm")}))):(a.name=t.initForm.name,a.token=t.initForm.token?t.initForm.token:"component",a.userId=Object(c["c"])().id,a.author=Object(c["c"])().nickName,a.type=t.initForm.abstract,a.description=t.initForm.description,s["a"].add(a).then((function(e){console.log("组件",e.data),200===e.code?(t.$message.success(e.msg,.5),t.$store.commit("SET_PROJECT",e.data),t.$store.commit("SET_CREATEVISIBLE",!1),t.$router.push({name:"Project"})):(t.$message.error(e.msg,.5),t.resetForm("ruleForm"))})).catch((function(){t.$message.error("新建失败",.5),t.resetForm("ruleForm")})))}))},handleCancel:function(){this.$store.commit("SET_CREATEVISIBLE",!1),this.$router.push({path:"/usercenter/projectinfo"}),this.$message.info("取消新建",.5)},resetForm:function(e){this.$refs[e].resetFields()},beforeUnloadHandler:function(e){e.returnValue=""}},created:function(){this.getChipList()},mounted:function(){this.$bus.$on("clear",this.clearExpand)},destroyed:function(){}},u=l,m=a("2877"),d=Object(m["a"])(u,i,n,!1,null,"02fe3f26",null);t["default"]=d.exports},"21dc":function(e,t,a){},4114:function(e,t,a){"use strict";var i=a("b775"),n={add:function(e){return Object(i["d"])("/chip",e)},queryById:function(e){return Object(i["c"])("/chip/"+e)},queryAll:function(){return Object(i["c"])("/chip")},update:function(e){return Object(i["e"])("/chip",e)},del:function(e){return Object(i["a"])("/chip/"+e)}};t["a"]=n},6826:function(e,t,a){"use strict";var i=a("b775"),n={init:function(e){return Object(i["d"])("/engineering/init",e)},add:function(e){return Object(i["d"])("/engineering",e)},queryById:function(e){return Object(i["c"])("/engineering/"+e)},queryByUid:function(e){return Object(i["c"])("/engineering/user/"+e)},queryAll:function(){return Object(i["c"])("/engineering")},update:function(e){return Object(i["e"])("/engineering",e)},del:function(e){return Object(i["a"])("/engineering/"+e)}};t["a"]=n},"6aec":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("a-button",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},on:{click:e.createProject}},[e._v("新建项目")]),a("Init"),a("a-table",{attrs:{columns:e.columns,"data-source":e.tableData,scroll:{y:250},loading:e.$store.getters.loading},scopedSlots:e._u([{key:"name",fn:function(t,i){return a("a",{on:{click:function(t){return e.open(i.id)}}},[e._v(e._s(t))])}},{key:"chipId",fn:function(t){return a("span",{},[e._v(e._s(e.findChipName(t)))])}},{key:"operation",fn:function(t,i){return[a("div",{staticClass:"editable-row-operations"},[a("a",{on:{click:function(){return e.edit(i)}}},[e._v("编辑")]),a("a-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:function(){return e.del(i.id)}}},[a("a",[e._v("删除")])])],1)]}}])}),a("a-list",{staticClass:"comment-list",attrs:{header:e.data.length+" 评论","item-layout":"horizontal","data-source":e.data},scopedSlots:e._u([{key:"renderItem",fn:function(t){return a("a-list-item",{},[a("a-comment",{attrs:{author:t.author,avatar:t.avatar}},[a("template",{slot:"actions"},e._l(t.actions,(function(t,i){return a("span",{key:i},[e._v(e._s(t))])})),0),a("p",{attrs:{slot:"content"},slot:"content"},[a("a-rate",{attrs:{"default-value":4,disabled:""}}),a("br"),e._v(" "+e._s(t.content)+" ")],1),a("a-tooltip",{attrs:{slot:"datetime",title:t.datetime.format("YYYY-MM-DD HH:mm:ss")},slot:"datetime"},[a("span",[e._v(e._s(t.datetime.fromNow()))])])],2)],1)}}])}),a("a-modal",{attrs:{title:"修改项目",closable:!0,maskClosable:!1},on:{cancel:e.handleCancel,ok:function(t){return e.save("ruleForm")}},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("a-form-model",e._b({ref:"ruleForm",attrs:{model:e.initForm,rules:e.rules}},"a-form-model",e.layout,!1),[a("a-form-model-item",{attrs:{"has-feedback":"",label:"项目名称：",prop:"name"}},[a("a-input",{ref:"name",attrs:{autoFocus:!0,type:"text",allowClear:"",autocomplete:"off"},model:{value:e.initForm.name,callback:function(t){e.$set(e.initForm,"name",t)},expression:"initForm.name"}})],1),a("a-form-model-item",{attrs:{label:"项目英文名：",prop:"token"}},[a("a-input",{ref:"token",attrs:{type:"text",allowClear:"",autocomplete:"off"},model:{value:e.initForm.token,callback:function(t){e.$set(e.initForm,"token",t)},expression:"initForm.token"}})],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"芯片类型：",prop:"chip"}},[a("a-select",{ref:"chip",attrs:{allowClear:"",autocomplete:"off"},model:{value:e.initForm.chip,callback:function(t){e.$set(e.initForm,"chip",t)},expression:"initForm.chip"}},e._l(e.chipList,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.name}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"堆大小：",prop:"heap"}},[a("a-input-number",{ref:"heap",attrs:{min:1,allowClear:"",type:"text",autocomplete:"off"},model:{value:e.initForm.heap,callback:function(t){e.$set(e.initForm,"heap",t)},expression:"initForm.heap"}})],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"栈大小：",prop:"stack"}},[a("a-input-number",{ref:"stack",attrs:{min:1,allowClear:"",type:"text",autocomplete:"off"},model:{value:e.initForm.stack,callback:function(t){e.$set(e.initForm,"stack",t)},expression:"initForm.stack"}})],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"简介：",prop:"description"}},[a("a-textarea",{attrs:{placeholder:"项目简单介绍",allowClear:"",rows:3},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save("ruleForm")}},model:{value:e.initForm.description,callback:function(t){e.$set(e.initForm,"description",t)},expression:"initForm.description"}})],1)],1)],1)],1)},n=[],r=a("c09b"),o=r["a"],s=(a("d3c1"),a("2877")),c=Object(s["a"])(o,i,n,!1,null,"4977e052",null);t["default"]=c.exports},8610:function(e,t,a){"use strict";var i=a("b775"),n={getTree:function(e,t){return Object(i["c"])("/tree/"+e+"/"+t)}};t["a"]=n},aa15:function(e,t,a){"use strict";var i=a("b775"),n={add:function(e){return Object(i["d"])("/component",e)},queryById:function(e){return Object(i["c"])("/component/"+e)},queryAll:function(){return Object(i["c"])("/component")},update:function(e){return Object(i["e"])("/component",e)},del:function(e,t){return Object(i["a"])("/component/"+e+"/"+t)}};t["a"]=n},c09b:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b0c0"),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("25f0"),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_3__),moment__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("c1df"),moment__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__),_views_project_Init__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("0fa8"),_api_engineering__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("6826"),_api_tree__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("8610"),_utils_token__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("cc33"),_api_chip__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("4114"),columns=[{title:"项目名",dataIndex:"name",key:"name",align:"center",width:"17%",scopedSlots:{customRender:"name"}},{title:"英语名",dataIndex:"token",width:"17%",key:"token",align:"center"},{title:"芯片",dataIndex:"chipId",width:"15%",key:"chipId",align:"center",scopedSlots:{customRender:"chipId"}},{title:"堆大小",dataIndex:"heap",width:"10%",align:"center",key:"heap"},{title:"栈大小",dataIndex:"stack",width:"10%",align:"center",key:"stack"},{title:"简介",dataIndex:"description",key:"description",width:"20%",align:"center",ellipsis:!0},{title:"操作",dataIndex:"operation",key:"operation",align:"center",ellipsis:!0,scopedSlots:{customRender:"operation"}}];__webpack_exports__["a"]={components:{Init:_views_project_Init__WEBPACK_IMPORTED_MODULE_5__["default"]},data:function(){return{chipList:[],initForm:{id:"",type:"0",name:"",token:"",heap:"",stack:"",chip:"芯片1",description:""},rules:{type:[{required:!0,message:"请选择项目类型",trigger:"change"}],name:[{required:!0,message:"请输入项目名称",trigger:"change"}],heap:[{required:!0,message:"请输入堆大小",trigger:"change"}],stack:[{required:!0,message:"请输入栈大小",trigger:"change"}],chipId:[{required:!0,message:"请选择芯片类型",trigger:"change"}]},layout:{labelCol:{span:7},wrapperCol:{span:15}},visible:!1,data:[{actions:["回复"],author:"HSY",avatar:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",content:"工程很棒！想借用一下",datetime:moment__WEBPACK_IMPORTED_MODULE_4___default()().subtract(1,"days")},{actions:["回复"],author:"Han Solo",avatar:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",content:"We supply a series of design principles, practical patterns and high quality design resources (Sketch and Axure), to help people create their product prototypes beautifully and efficiently.",datetime:moment__WEBPACK_IMPORTED_MODULE_4___default()().subtract(2,"days")}],tableData:[],columns:columns,moment:moment__WEBPACK_IMPORTED_MODULE_4___default.a}},computed:{},watch:{},methods:{getChipList:function(){var e=this;_api_chip__WEBPACK_IMPORTED_MODULE_9__["a"].queryAll().then((function(t){200===t.code?e.chipList=t.data:e.chipList=[]}))},findChipId:function(e){for(var t=0;t<this.chipList.length;t++)if(this.chipList[t].name===e)return this.chipList[t].id},findChipName:function(e){for(var t=0;t<this.chipList.length;t++)if(this.chipList[t].id===+e)return this.chipList[t].name},createProject:function(){this.$store.commit("SET_CREATEVISIBLE",!0)},getAllEngineerings:function(){var e=this;_api_engineering__WEBPACK_IMPORTED_MODULE_6__["a"].queryByUid(Object(_utils_token__WEBPACK_IMPORTED_MODULE_8__["c"])().id).then((function(t){200===t.code&&t.data.length?(t.data.map((function(e){return e.key=e.id})),e.tableData=t.data):e.tableData=[]})).catch((function(e){console.log(e)}))},open:function(e){var t=this;this.$store.commit("CLEAR_PANES"),_api_tree__WEBPACK_IMPORTED_MODULE_7__["a"].getTree(1,0).then((function(e){t.$store.commit("SET_SYSTEMTREE",e.data)})).catch((function(e){t.$message.error("外部组件获取失败",.7),console.error(e)})),_api_tree__WEBPACK_IMPORTED_MODULE_7__["a"].getTree(Object(_utils_token__WEBPACK_IMPORTED_MODULE_8__["c"])().id,e).then((function(e){t.$store.commit("SET_USERTREE",e.data)})).catch((function(e){t.$message.error("内部组件获取失败",.7),console.error(e)})),_api_engineering__WEBPACK_IMPORTED_MODULE_6__["a"].queryById(e).then((function(e){200===e.code&&(t.$message.success(e.msg,.5),t.$store.commit("SET_PROJECT",e.data),sessionStorage.setItem("projectId",e.data.id),Object(_utils_token__WEBPACK_IMPORTED_MODULE_8__["a"])()&&Object(_utils_token__WEBPACK_IMPORTED_MODULE_8__["d"])(),Object(_utils_token__WEBPACK_IMPORTED_MODULE_8__["h"])(e.data),t.$router.push({name:"Project"}))}))},edit:function edit(record){this.visible=!0;var data={};Object.assign(data,record),data.chip=this.findChipName(data.chipId),data.stack=eval(data.stack).toString(10),data.heap=eval(data.heap).toString(10),delete data.chipId,this.initForm=data},save:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.initForm.chipId=t.findChipId(t.initForm.chip),t.initForm.stack="0x"+parseInt(t.initForm.stack).toString(16),t.initForm.heap="0x"+parseInt(t.initForm.heap).toString(16),delete t.initForm.chip,_api_engineering__WEBPACK_IMPORTED_MODULE_6__["a"].update(t.initForm).then((function(e){t.$message.success(e.msg,.5),t.visible=!1,t.getAllEngineerings()})))}))},del:function(e){var t=this;_api_engineering__WEBPACK_IMPORTED_MODULE_6__["a"].del(e).then((function(e){t.$message.success(e.msg,.5),t.getAllEngineerings()}))},handleCancel:function(){this.$store.commit("SET_CREATEVISIBLE",!1),this.visible=!1,this.initForm={},this.$message.info("取消修改",.5)}},created:function(){this.getAllEngineerings(),this.getChipList()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}}},d3c1:function(e,t,a){"use strict";a("21dc")},e01a:function(e,t,a){"use strict";var i=a("23e7"),n=a("83ab"),r=a("da84"),o=a("e330"),s=a("1a2d"),c=a("1626"),_=a("3a9b"),l=a("577e"),u=a("9bf2").f,m=a("e893"),d=r.Symbol,p=d&&d.prototype;if(n&&c(d)&&(!("description"in p)||void 0!==d().description)){var f={},h=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),t=_(p,this)?new d(e):void 0===e?d():d(e);return""===e&&(f[t]=!0),t};m(h,d),h.prototype=p,p.constructor=h;var b="Symbol(test)"==String(d("test")),g=o(p.toString),E=o(p.valueOf),k=/^Symbol\((.*)\)[^)]+$/,O=o("".replace),v=o("".slice);u(p,"description",{configurable:!0,get:function(){var e=E(this),t=g(e);if(s(f,e))return"";var a=b?v(t,7,-1):O(t,k,"$1");return""===a?void 0:a}}),i({global:!0,forced:!0},{Symbol:h})}},e1bd:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));let i=(e=21)=>{let t="",a=crypto.getRandomValues(new Uint8Array(e));while(e--){let i=63&a[e];t+=i<36?i.toString(36):i<62?(i-26).toString(36).toUpperCase():i<63?"_":"-"}return t}}}]);